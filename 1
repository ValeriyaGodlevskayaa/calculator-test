/*! Cookies.js - 0.3.1; Copyright (c) 2013, Scott Hamper; http://www.opensource.org/licenses/MIT */
(function(e){"use strict";var a=function(b,d,c){return 1===arguments.length?a.get(b):a.set(b,d,c)};a._document=document;a._navigator=navigator;a.defaults={path:"/"};a.get=function(b){a._cachedDocumentCookie!==a._document.cookie&&a._renewCache();return a._cache[b]};a.set=function(b,d,c){c=a._getExtendedOptions(c);c.expires=a._getExpiresDate(d===e?-1:c.expires);a._document.cookie=a._generateCookieString(b,d,c);return a};a.expire=function(b,d){return a.set(b,e,d)};a._getExtendedOptions=function(b){return{path:b&&b.path||a.defaults.path,domain:b&&b.domain||a.defaults.domain,expires:b&&b.expires||a.defaults.expires,secure:b&&b.secure!==e?b.secure:a.defaults.secure}};a._isValidDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)&&!isNaN(b.getTime())};a._getExpiresDate=function(b,d){d=d||new Date;switch(typeof b){case "number":b=new Date(d.getTime()+1E3*b);break;case "string":b=new Date(b)}if(b&&!a._isValidDate(b))throw Error("`expires` parameter cannot be converted to a valid Date instance");return b};a._generateCookieString=function(b,a,c){b=encodeURIComponent(b);a=(a+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent);c=c||{};b=b+"="+a+(c.path?";path="+c.path:"");b+=c.domain?";domain="+c.domain:"";b+=c.expires?";expires="+c.expires.toUTCString():"";return b+=c.secure?";secure":""};a._getCookieObjectFromString=function(b){var d={};b=b?b.split("; "):[];for(var c=0;c<b.length;c++){var f=a._getKeyValuePairFromCookieString(b[c]);d[f.key]===e&&(d[f.key]=f.value)}return d};a._getKeyValuePairFromCookieString=function(b){var a=b.indexOf("="),a=0>a?b.length:a;return{key:decodeURIComponent(b.substr(0,a)),value:decodeURIComponent(b.substr(a+1))}};a._renewCache=function(){a._cache=a._getCookieObjectFromString(a._document.cookie);a._cachedDocumentCookie=a._document.cookie};a._areEnabled=function(){return a._navigator.cookieEnabled||"1"===a.set("cookies.js",1).get("cookies.js")};a.enabled=a._areEnabled();"function"===typeof define&&define.amd?define(function(){return a}):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=a),exports.lhc_Cookies=a):window.lhc_Cookies=a})();var lh_inst  = {JSON : {parse: window.JSON && (window.JSON.parse || window.JSON.decode) || String.prototype.evalJSON && function(str){return String(str).evalJSON();} || $.parseJSON || $.evalJSON,stringify:  Object.toJSON || window.JSON && (window.JSON.stringify || window.JSON.encode) || $.toJSON},offset_data : '',is_dragging : false,urlopen : "//ginocerruti.com/lhc_web/index.php/chat/startchat/(department)/1",
windowname : "startchatwindow",substatus : '',cookieData : {},cookieDataPers : {},addCss : function(css_content) {var head = document.getElementsByTagName('head')[0];var style = document.createElement('style');style.type = 'text/css';if(style.styleSheet) {style.styleSheet.cssText = css_content;} else {rules = document.createTextNode(css_content);style.appendChild(rules);};head.appendChild(style);},appendHTML : function (htmlStr) {var frag = document.createDocumentFragment(),temp = document.createElement('div');temp.innerHTML = htmlStr;while (temp.firstChild) {frag.appendChild(temp.firstChild);};return frag;},removeById : function(EId){return(EObj=document.getElementById(EId))?EObj.parentNode.removeChild(EObj):false;},hasClass : function(el, name) {return new RegExp('(\\s|^)'+name+'(\\s|$)').test(el.className);},addClass : function(el, name) {if (!this.hasClass(el, name)) { el.className += (el.className ? ' ' : '') +name; }},removeClass : function(el, name) {if (this.hasClass(el, name)) {el.className=el.className.replace(new RegExp('(\\s|^)'+name+'(\\s|$)'),' ').replace(/^\s+|\s+$/g, '');}},storePos : function(dm) {var cookiePos = '';cookiePos += dm.style.right;cookiePos += ","+dm.style.bottom;this.addCookieAttribute('pos',cookiePos);},min : function() {var dm = document.getElementById('lhc_container');if (!dm.attrIsMin || dm.attrIsMin == false) {dm.attrHeight = dm.style.height;dm.attrIsMin = true;this.addClass(dm,'lhc-no-transition');this.addClass(dm,'lhc-min');if(dm.style.bottom!='' && dm.attrHeight!='')dm.style.bottom = (parseInt(dm.style.bottom)+parseInt(dm.attrHeight)-35)+'px';this.addCookieAttribute('m',1);this.storePos(dm);} else {dm.attrIsMin = false;if(dm.style.bottom!='')dm.style.bottom = (parseInt(dm.style.bottom)-parseInt(document.getElementById('lhc_iframe').style.height)+9)+'px';this.removeCookieAttr('m');this.removeClass(dm,'lhc-min');var inst = this;setTimeout(function(){inst.removeClass(dm,'lhc-no-transition');},500);this.storePos(dm);};},hide : function() {var th = document.getElementsByTagName('head')[0];var s = document.createElement('script');s.setAttribute('type','text/javascript');s.setAttribute('src','//ginocerruti.com/lhc_web/index.php/chat/chatwidgetclosed'+this.getAppendCookieArguments());
th.appendChild(s);this.removeById('lhc_container');this.removeCookieAttr('hash');this.removeCookieAttr('pos');this.removeCookieAttr('m');this.startNewMessageCheck();},getAppendCookieArguments : function() {var hashAppend = this.cookieData.hash ? '/(hash)/'+this.cookieData.hash : '';var vidAppend = this.cookieDataPers.vid ? '/(vid)/'+this.cookieDataPers.vid : '';var hashResume = this.cookieData.hash_resume ? '/(hash_resume)/'+this.cookieData.hash_resume : '';var soundOption = this.cookieData.s ? '/(sound)/'+this.cookieData.s : '';return hashAppend+vidAppend+hashResume+soundOption;},openRemoteWindow : function() {this.removeById('lhc_container');var popupHeight = (typeof LHCChatOptions != 'undefined' && typeof LHCChatOptions.opt != 'undefined' && typeof LHCChatOptions.opt.popup_height != 'undefined') ? parseInt(LHCChatOptions.opt.popup_height) : 520;var popupWidth = (typeof LHCChatOptions != 'undefined' && typeof LHCChatOptions.opt != 'undefined' && typeof LHCChatOptions.opt.popup_width != 'undefined') ? parseInt(LHCChatOptions.opt.popup_width) : 500;window.open(this.urlopen+this.getAppendCookieArguments()+'?URLReferer='+encodeURIComponent(document.location)+this.parseOptions()+this.parseStorageArguments(),this.windowname,"menubar=1,resizable=1,width="+popupWidth+",height="+popupHeight);this.removeCookieAttr('hash');},parseOptions : function() {argumentsQuery = new Array();if (typeof LHCChatOptions != 'undefined') {if (typeof LHCChatOptions.attr != 'undefined') {if (LHCChatOptions.attr.length > 0){for (var index in LHCChatOptions.attr) {if (typeof LHCChatOptions.attr[index] != 'undefined' && typeof LHCChatOptions.attr[index].type != 'undefined') {argumentsQuery.push('name[]='+encodeURIComponent(LHCChatOptions.attr[index].name)+'&value[]='+encodeURIComponent(LHCChatOptions.attr[index].value)+'&type[]='+encodeURIComponent(LHCChatOptions.attr[index].type)+'&size[]='+encodeURIComponent(LHCChatOptions.attr[index].size)+'&req[]='+(typeof LHCChatOptions.attr[index].req != 'undefined' && LHCChatOptions.attr[index].req == true ? 't' : 'f')+'&sh[]='+((typeof LHCChatOptions.attr[index].show != 'undefined' && (LHCChatOptions.attr[index].show == 'on' || LHCChatOptions.attr[index].show == 'off')) ? LHCChatOptions.attr[index].show : 'b'));};};};};if (typeof LHCChatOptions.attr_prefill != 'undefined') {if (LHCChatOptions.attr_prefill.length > 0){for (var index in LHCChatOptions.attr_prefill) {if (typeof LHCChatOptions.attr_prefill[index] != 'undefined' && typeof LHCChatOptions.attr_prefill[index].name != 'undefined') {argumentsQuery.push('prefill['+LHCChatOptions.attr_prefill[index].name+']='+encodeURIComponent(LHCChatOptions.attr_prefill[index].value));};};};};if (argumentsQuery.length > 0) {return '&'+argumentsQuery.join('&');};};return '';},parseStorageArguments : function() {if (sessionStorage && sessionStorage.getItem('lhc_ref') && sessionStorage.getItem('lhc_ref') != '') {return '&r='+encodeURIComponent(sessionStorage.getItem('lhc_ref'));}return '';},addEvent : (function () {if (document.addEventListener) {return function (el, type, fn) {if (el && el.nodeName || el === window) {el.addEventListener(type, fn, false);} else if (el && el.length) {for (var i = 0; i < el.length; i++) {lh_inst.addEvent(el[i], type, fn);}}};} else {return function (el, type, fn) {if (el && el.nodeName || el === window) {el.attachEvent('on' + type, function () { return fn.call(el, window.event); });} else if (el && el.length) {for (var i = 0; i < el.length; i++) {lh_inst.addEvent(el[i], type, fn);}}};}})(),showStartWindow : function(url_to_open) {// Do not check for new messages
this.stopCheckNewMessage();this.removeById('lhc_container');if ( url_to_open != undefined ) {this.chatOpenedCallback('internal_invitation');this.initial_iframe_url = url_to_open+this.getAppendCookieArguments()+'?URLReferer='+encodeURIComponent(document.location)+this.parseOptions()+this.parseStorageArguments()+'&dt='+encodeURIComponent(document.title);} else {this.chatOpenedCallback('internal');this.initial_iframe_url = "//ginocerruti.com/lhc_web/index.php/chat/chatwidget/(department)/1"+this.getAppendCookieArguments()+'?URLReferer='+encodeURIComponent(document.location)+this.parseOptions()+this.parseStorageArguments()+'&dt='+encodeURIComponent(document.title);
};var widgetWidth = (typeof LHCChatOptions != 'undefined' && typeof LHCChatOptions.opt != 'undefined' && typeof LHCChatOptions.opt.widget_width != 'undefined') ? parseInt(LHCChatOptions.opt.widget_width) : 300;var widgetHeight = (typeof LHCChatOptions != 'undefined' && typeof LHCChatOptions.opt != 'undefined' && typeof LHCChatOptions.opt.widget_height != 'undefined') ? parseInt(LHCChatOptions.opt.widget_height) : 340;this.iframe_html = '<iframe id="lhc_iframe" allowTransparency="true" scrolling="no" class="lhc-loading" frameborder="0" ' +( this.initial_iframe_url != '' ? ' src="'    + this.initial_iframe_url + '"' : '' ) +' width="'+widgetWidth+'"' +' height="'+widgetHeight+'"' +' style="width: '+widgetWidth+'px; height: '+widgetHeight+'px;"></iframe>';this.iframe_html = '<div id="lhc_container">' +'<div id="lhc_header"><span id="lhc_title"><a title="Powered by Live Helper Chat" href="http://livehelperchat.com" target="_blank"><img src="//ginocerruti.com/lhc_web/design/defaulttheme/images/icons/user_green_chat_16x16.png" alt="Live Helper Chat" /></a></span><a href="#" title="Close" id="lhc_close"><img src="//ginocerruti.com/lhc_web/design/defaulttheme/images/icons/cancel.png" title="Close" alt="Close" /></a>&nbsp;<a href="#" title="Open in a new window" id="lhc_remote_window"><img src="//ginocerruti.com/lhc_web/design/defaulttheme/images/icons/application_double.png" alt="Open in a new window" title="Open in a new window" /></a><a href="#" id="lhc_min" title="Minimize/Restore"><img src="//ginocerruti.com/lhc_web/design/defaulttheme/images/icons/min.png"></a></div>' +
this.iframe_html + '</div>';raw_css = ".lhc-no-transition{ -webkit-transition: none !important; -moz-transition: none !important;-o-transition: none !important;-ms-transition: none !important;transition: none !important;}\n.lhc-min{height:35px !important}\n#lhc_container * {direction:ltr;text-align:left;;font-family:arial;font-size:12px;line-height:100%;box-sizing: content-box;-moz-box-sizing:content-box;padding:0;margin:0;}\n#lhc_container img {border:0;}\n#lhc_title{float:left;}\n#lhc_header{position:relative;z-index:9990;height:15px;overflow:hidden;-webkit-border-top-left-radius: 10px;-moz-border-radius-topleft: 10px;border-top-left-radius: 10px;background-color:#FFF;text-align:right;clear:both;border-bottom:1px solid #CCC;padding:5px;}\n#lhc_remote_window,#lhc_min,#lhc_close{padding:2px;float:right;}\n#lhc_close:hover,#lhc_min:hover,#lhc_remote_window:hover{background:#e5e5e5;}\n#lhc_container {background-color:#FFF;height:"+(parseInt(widgetHeight)+26)+"px; -moz-user-select:none; -khtml-user-drag:element;cursor: move;cursor: -moz-grab;cursor: -webkit-grab;overflow: hidden;transition-property: height;transition-duration: 0.4s;-webkit-transition: height 0.4s ease-in-out;transition: height 0.4s;\nz-index:9990;\n position: fixed;bottom:0;right:0;;-webkit-box-shadow: -2px -2px 5px rgba(50, 50, 50, 0.17);-moz-box-shadow: -2px -2px 5px rgba(50, 50, 50, 0.17);box-shadow: -2px -2px 5px rgba(50, 50, 50, 0.17);border:1px solid #CCC;-webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px; }\n#lhc_container iframe{transition-property: height;transition-duration: 0.4s;-webkit-transition: height 0.4s ease-in-out;transition: height 0.4s;}\n#lhc_container iframe.lhc-loading{\nbackground: #FFF url(//ginocerruti.com/lhc_web/design/defaulttheme/images/general/loading.gif) no-repeat center center; }\n";
if (!this.cssWasAdded) {this.cssWasAdded = true;this.addCss(raw_css);};var fragment = this.appendHTML(this.iframe_html);document.body.insertBefore(fragment, document.body.childNodes[0]);var lhc_obj = this;document.getElementById('lhc_close').onclick = function() { lhc_obj.hide(); return false; };document.getElementById('lhc_min').onclick = function() { lhc_obj.min(); return false; };document.getElementById('lhc_remote_window').onclick = function() { lhc_obj.openRemoteWindow(); return false; };var domContainer = document.getElementById('lhc_container');var domIframe = 'lhc_iframe';var domContainerId = 'lhc_container';domContainer.onmousedown = function(e) {domContainer.setAttribute('draggable','true');};domContainer.onmouseup = function(e) {domContainer.setAttribute('draggable','false');};if (this.cookieData.pos) {var posContainer = this.cookieData.pos.split(',');domContainer.style.right = posContainer[0];domContainer.style.bottom = posContainer[1];};this.addEvent(domContainer, 'dragstart', function (event) {var style = window.getComputedStyle(event.target, null);lhc_obj.offset_data = (parseInt(style.getPropertyValue("right"),10) + (event.clientX)) + ',' + (parseInt(style.getPropertyValue("bottom"),10)+event.clientY);try {event.dataTransfer.setData("text/plain",lhc_obj.offset_data);} catch (e){};lhc_obj.is_dragging = true;domContainer.style.zIndex=9995;theKid = document.createElement("div");theKid.innerHTML = '';theKid.setAttribute('id','lhc_overlapse');theKid.style.cssText = "position:absolute;height:" + domContainer.style.height + ";width:100%;";domContainer.insertBefore(theKid, domContainer.firstChild);});this.addEvent(domContainer, 'dragenter', function (e) {lhc_obj.is_dragging = true;return false;});if (!this.dragAttatched) {this.dragAttatched = true;this.addEvent(document.body, 'drop', function (event) {if (lhc_obj.is_dragging == true) {domContainer = document.getElementById(domContainerId);domContainer.style.zIndex=9990;lhc_obj.is_dragging = false;lhc_obj.removeById('lhc_overlapse');var offset = lhc_obj.offset_data.split(',');dm = domContainer;var cookiePos = '';dm.style.right = (parseInt(offset[0],10)-event.clientX) + 'px';cookiePos += dm.style.right;dm.style.bottom = (-event.clientY + parseInt(offset[1],10)) + 'px';cookiePos += ","+dm.style.bottom;lhc_obj.addCookieAttribute('pos',cookiePos);event.preventDefault();domContainer.draggable = false;return false;};});this.addEvent(document.body, 'dragover', function (event) {if (lhc_obj.is_dragging == true) {domContainer = document.getElementById(domContainerId);domContainer.setAttribute('draggable','false');var offset = lhc_obj.offset_data.split(',');var dm = domContainer;dm.style.right = (parseInt(offset[0],10)-event.clientX) + 'px';dm.style.bottom = (-event.clientY + parseInt(offset[1],10)) + 'px';event.preventDefault();return false;}});};if (this.cookieData.m) {this.min();};},lh_openchatWindow : function() {this.showStartWindow();return false;},chatOpenedCallback : function(type){if (typeof LHCChatOptions != 'undefined' && typeof LHCChatOptions.callback != 'undefined' && typeof LHCChatOptions.callback.start_chat_cb != 'undefined') {LHCChatOptions.callback.start_chat_cb(type+this.substatus);this.substatus = '';}},showStatusWidget : function() {var statusTEXT = '<a id="offline-icon" class="status-icon" href="#" onclick="return lh_inst.lh_openchatWindow()" >Live help is offline...</a>';var raw_css = "#lhc_status_container * {direction:ltr;text-align:left;;font-family:arial;font-size:12px;box-sizing: content-box;zoom:1;margin:0;padding:0}\n#lhc_status_container .status-icon{text-decoration:none;font-size:12px;font-weight:bold;color:#000;display:block;padding:10px 10px 10px 35px;background:url('//ginocerruti.com/lhc_web/design/defaulttheme/images/icons/user_green_chat.png') no-repeat left center}\n#lhc_status_container:hover{}\n#lhc_status_container #offline-icon{background-image:url('//ginocerruti.com/lhc_web/design/defaulttheme/images/icons/user_gray_chat.png')}\n#lhc_status_container{box-sizing: content-box;-webkit-border-top-left-radius: 20px;-moz-border-radius-topleft: 20px;border-top-left-radius: 20px;-webkit-box-shadow: -2px -2px 5px rgba(50, 50, 50, 0.17);border:1px solid #e3e3e3;border-right:0;border-bottom:0;;-moz-box-shadow:-2px -2px 5px rgba(50, 50, 50, 0.17);box-shadow: -2px -2px 5px rgba(50, 50, 50, 0.17);padding:5px 0px 0px 5px;width:190px;font-family:arial;font-size:12px;transition: 1s;position:fixed;bottom:0;right:0;;background-color:#f6f6f6;z-index:9989;}\n";
this.addCss(raw_css);var htmlStatus = '<div id="lhc_status_container">'+statusTEXT+'</div>';var fragment = this.appendHTML(htmlStatus);document.body.insertBefore(fragment, document.body.childNodes[0]);},timeoutInstance : null,stopCheckNewMessage : function() {clearTimeout(this.timeoutInstance);},startNewMessageCheck : function() {var vid = this.cookieDataPers.vid;var inst = this;this.timeoutInstance = setTimeout(function() {lh_inst.removeById('lhc_operator_message');var th = document.getElementsByTagName('head')[0];var s = document.createElement('script');s.setAttribute('id','lhc_operator_message');s.setAttribute('type','text/javascript');s.setAttribute('src','//ginocerruti.com/lhc_web/index.php/chat/chatcheckoperatormessage/(department)/1/(vid)/'+vid+'?l='+encodeURIComponent(document.location))+'&dt='+encodeURIComponent(document.title);
th.appendChild(s);lh_inst.startNewMessageCheck();}, 10000 );},startNewMessageCheckSingle : function() {var vid = this.cookieDataPers.vid;lh_inst.removeById('lhc_operator_message');var th = document.getElementsByTagName('head')[0];var s = document.createElement('script');s.setAttribute('id','lhc_operator_message');s.setAttribute('type','text/javascript');s.setAttribute('src','//ginocerruti.com/lhc_web/index.php/chat/chatcheckoperatormessage/(department)/1/(count_page)/1/(vid)/'+vid+'?l='+encodeURIComponent(document.location)+this.parseStorageArguments()+'&dt='+encodeURIComponent(document.title));
th.appendChild(s);},removeCookieAttr : function(attr){if (this.cookieData[attr]) {delete this.cookieData[attr];this.storeSesCookie();}},addCookieAttribute : function(attr, value){if (!this.cookieData[attr] || this.cookieData[attr] != value){this.cookieData[attr] = value;this.storeSesCookie();}},storePersistenCookie : function(){lhc_Cookies('lhc_per',this.JSON.stringify(this.cookieDataPers),{expires:16070400});},storeSesCookie : function(){if (sessionStorage) {sessionStorage.setItem('lhc_ses',this.JSON.stringify(this.cookieData));} else {lhc_Cookies('lhc_ses',this.JSON.stringify(this.cookieData));}},initSessionStorage : function(){if (sessionStorage && sessionStorage.getItem('lhc_ses')) {this.cookieData = this.JSON.parse(sessionStorage.getItem('lhc_ses'));} else {var cookieData = lhc_Cookies('lhc_ses');if ( typeof cookieData === "string" && cookieData ) {this.cookieData = this.JSON.parse(cookieData);}}},storeReferrer : function(ref){if (sessionStorage && !sessionStorage.getItem('lhc_ref')) {sessionStorage.setItem('lhc_ref',ref);}},makeScreenshot : function() {var inst = this;if (typeof html2canvas == "undefined") {var th = document.getElementsByTagName('head')[0];var s = document.createElement('script');s.setAttribute('type','text/javascript');s.setAttribute('src','//ginocerruti.com/lhc_web/design/defaulttheme/js/html2canvas.min.js');
th.appendChild(s);s.onreadystatechange = s.onload = function(){inst.makeScreenshot();};} else {try {html2canvas(document.body, {onrendered: function(canvas) {var xhr = new XMLHttpRequest();xhr.open( "POST", '//ginocerruti.com/lhc_web/index.php/file/storescreenshot'+inst.getAppendCookieArguments(), true);
xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");xhr.send( "data=" + encodeURIComponent( canvas.toDataURL() ) );}});} catch(err) {}};},handleMessage : function(e) {var action = e.data.split(':')[0];if (action == 'lhc_sizing_chat') {var height = e.data.split(':')[1];var elementObject = document.getElementById('lhc_iframe');var iframeContainer = document.getElementById('lhc_container');if (elementObject){elementObject.height = height;elementObject.style.height = height+'px';}iframeContainer.className = iframeContainer.className;iframeContainer.style.height = (parseInt(height)+26)+'px';} else if (action == 'lhc_ch') {var parts = e.data.split(':');if (parts[1] != '' && parts[2] != '') {lh_inst.addCookieAttribute(parts[1],parts[2]);}} else if (action == 'lhc_screenshot') {lh_inst.makeScreenshot();}}};if ( window.attachEvent ) {// IE
window.attachEvent("onmessage", lh_inst.handleMessage);};if ( document.attachEvent ) {// IE
document.attachEvent("onmessage", lh_inst.handleMessage);};if ( window.addEventListener ){// FF
window.addEventListener("message", lh_inst.handleMessage, false);};var cookieData = lhc_Cookies('lhc_per');if ( typeof cookieData === "string" && cookieData ) {lh_inst.cookieDataPers = lh_inst.JSON.parse(cookieData);if (!lh_inst.cookieDataPers.vid) {lh_inst.cookieDataPers = {vid:'no1by6ge426kzfmus6hd'};lh_inst.storePersistenCookie();};} else {lh_inst.cookieDataPers = {vid:'no1by6ge426kzfmus6hd'};lh_inst.storePersistenCookie();};lh_inst.initSessionStorage();lh_inst.showStatusWidget();if (lh_inst.cookieData.hash) {lh_inst.stopCheckNewMessage();lh_inst.substatus = '_reopen';lh_inst.showStartWindow();}